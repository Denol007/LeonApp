<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–õ–µ–æ–Ω, —Ç—ã —Å–º–æ–∂–µ—à—å!</title>
    <!-- 1. –ü–æ–¥–∫–ª—é—á–∞–µ–º Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–µ–π -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. –ü–æ–¥–∫–ª—é—á–∞–µ–º React –∏ ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- 3. –ü–æ–¥–∫–ª—é—á–∞–µ–º Babel –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è JSX -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!-- 4. –ü–æ–¥–∫–ª—é—á–∞–µ–º Tone.js –¥–ª—è –∑–≤—É–∫–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã ---
        const synth = new Tone.Synth().toDestination();
        const playClickSound = () => {
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–≤—É–∫ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (Tone.context.state !== 'running') {
                Tone.context.resume();
            }
            synth.triggerAttackRelease("C4", "8n");
        }
        const playBoostSound = () => synth.triggerAttackRelease("E4", "8n");
        const playSuccessSound = () => {
            const now = Tone.now();
            synth.triggerAttackRelease("C5", "8n", now);
            synth.triggerAttackRelease("G5", "8n", now + 0.2);
        }

        // --- –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø–µ—á–∞—Ç–∞—é—â–µ–≥–æ—Å—è —Ç–µ–∫—Å—Ç–∞ ---
        function useTypingEffect(text, duration = 50) {
            const [typedText, setTypedText] = React.useState('');
            React.useEffect(() => {
                setTypedText('');
                if (text) {
                    const interval = setInterval(() => {
                        setTypedText(prev => {
                            if (prev.length < text.length) return text.slice(0, prev.length + 1);
                            clearInterval(interval);
                            return prev;
                        });
                    }, duration);
                    return () => clearInterval(interval);
                }
            }, [text, duration]);
            return typedText;
        }

        // --- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ---
        function App() {
            const [step, setStep] = React.useState(1);
            const [confidence, setConfidence] = React.useState(0);
            const [isModalOpen, setIsModalOpen] = React.useState(false);

            const messages = [
                "–¢—ã –∫—Ä–∞—Å–∞–≤—á–∏–∫, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ —Ñ–æ–Ω–µ –¥—Ä—É–≥–∏—Ö!", "–Ø –±—ã —Ç–µ–±–µ —Ç–æ—á–Ω–æ –¥–∞–ª(–∞)!",
                "–≠–≤–µ–ª–∏–Ω–∞ —É–∂–µ –∂–¥–µ—Ç —Ç–≤–æ–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è!", "–¢—ã —Å–º–æ–∂–µ—à—å, –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–∏!",
                "–ü—Ä–µ–¥—Å—Ç–∞–≤—å, –∫–∞–∫ –æ–Ω–∞ —É–ª—ã–±–Ω–µ—Ç—Å—è —Ç–µ–±–µ –≤ –æ—Ç–≤–µ—Ç!", "–¢—ã –ª—É—á—à–µ –≤—Å–µ—Ö, –∫—Ç–æ –≤–æ–∫—Ä—É–≥ –Ω–µ–µ!",
                "–°–¥–µ–ª–∞–π —ç—Ç–æ —Ä–∞–¥–∏ —Å–µ–±—è!", "–ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç —Ç—ã –±—É–¥–µ—à—å –≥–æ—Ä–¥–∏—Ç—å—Å—è —Å–æ–±–æ–π!"
            ];
            
            const [currentMessageIndex, setCurrentMessageIndex] = React.useState(0);
            const typedMessage = useTypingEffect(messages[currentMessageIndex], 50);

            React.useEffect(() => {
                if (confidence === 100) {
                    playSuccessSound();
                    setTimeout(() => setStep(3), 1000);
                }
            }, [confidence]);

            React.useEffect(() => {
                if (step === 4) { // –°–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ —à–∞–≥–µ 4
                    const interval = setInterval(() => {
                        setCurrentMessageIndex(prev => (prev + 1) % messages.length);
                    }, 4000);
                    return () => clearInterval(interval);
                }
            }, [step, messages.length]);

            const handleConfidenceBoost = () => {
                playBoostSound();
                setConfidence(prev => Math.min(prev + 25, 100));
            };
            
            const openTelegram = (message = "–ü—Ä–∏–≤–µ—Ç! üòâ") => {
                playClickSound();
                const url = `https://t.me/malinka_eva?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            };
            
            const restart = () => {
                playClickSound();
                setStep(1);
                setConfidence(0);
                setCurrentMessageIndex(0);
            };
            
            const getConfidenceFeedback = () => {
                if (confidence <= 25) return { emoji: 'ü§î', text: '–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –∑–æ–ª–æ—Ç–∞...' };
                if (confidence <= 50) return { emoji: 'üôÇ', text: '–£–∂–µ —Ç–µ–ø–ª–µ–µ!' };
                if (confidence <= 75) return { emoji: 'üòé', text: '–ü–æ—á—Ç–∏ –≥–æ—Ç–æ–≤!' };
                return { emoji: 'üî•', text: '–¢–´ –í –û–ì–ù–ï!' };
            };
            
            const handleNextStep = () => {
                playClickSound();
                setStep(prev => prev + 1);
            };

            const suggestionMessages = [
                "–ü—Ä–∏–≤–µ—Ç! –£–≤–∏–¥–µ–ª —Ç–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –∏ –Ω–µ —Å–º–æ–≥ –ø—Ä–æ–π—Ç–∏ –º–∏–º–æ üòä",
                "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –Ω–∞—Å—á–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–∫—Ä–∞—Å–∏—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –æ–±—â–µ–Ω–∏–µ–º?)",
                "–ü—Ä–∏–≤–µ—Ç! üòâ –ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —É –Ω–∞—Å –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏—Å—å –º–Ω–æ–≥–æ –æ–±—â–µ–≥–æ.",
                "–ü—Ä–∏–≤–µ—Ç, –≠–≤–µ–ª–∏–Ω–∞! –£ —Ç–µ–±—è –æ—á–µ–Ω—å –∫—Ä—É—Ç—ã–µ —Ñ–æ—Ç–∫–∏."
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-pink-400 via-purple-500 to-indigo-600 flex flex-col items-center justify-center p-4 relative overflow-hidden font-sans">
                    {/* --- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∏–¥–µ—è–º–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π --- */}
                    {isModalOpen && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4" onClick={() => setIsModalOpen(false)}>
                            <div className="bg-white rounded-2xl p-6 w-full max-w-sm" onClick={e => e.stopPropagation()}>
                                <h3 className="text-xl font-bold text-gray-800 mb-4">–ò–¥–µ–∏ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:</h3>
                                <div className="space-y-3">
                                    {suggestionMessages.map((msg, index) => (
                                        <button key={index} onClick={() => openTelegram(msg)} className="w-full text-left p-3 bg-gray-100 rounded-lg hover:bg-purple-100 transition">
                                            {msg}
                                        </button>
                                    ))}
                                </div>
                                <button onClick={() => setIsModalOpen(false)} className="mt-6 w-full text-center text-gray-500">–ó–∞–∫—Ä—ã—Ç—å</button>
                            </div>
                        </div>
                    )}

                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                        <div className="absolute -top-10 -left-10 w-32 h-32 bg-white rounded-full opacity-20 animate-bounce"></div>
                        <div className="absolute top-1/4 right-0 w-24 h-24 bg-white rounded-full opacity-30 animate-pulse"></div>
                    </div>
                    
                    <div className="w-full text-center mb-8 z-10">
                        <h1 className="text-4xl font-bold text-white mb-2 drop-shadow-lg">–õ–µ–æ–Ω, —Ç—ã —Å–º–æ–∂–µ—à—å!</h1>
                        <p className="text-lg text-white opacity-90">–ü–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–æ–¥–∫–∞—Ç–∞ –∫ –≠–≤–µ–ª–∏–Ω–µ</p>
                    </div>
                    
                    <div className="bg-white/90 backdrop-blur-sm rounded-3xl p-6 w-full max-w-md shadow-2xl z-10 min-h-[400px] flex items-center justify-center">
                        {step === 1 && (
                            <div className="w-full text-center">
                                <div className="w-24 h-24 bg-gradient-to-br from-pink-400 to-purple-600 rounded-full mx-auto mb-6 flex items-center justify-center shadow-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">–õ–µ–æ–Ω, —Ç—ã —Å—Å—ã–∫–ª–æ?</h2>
                                <p className="text-gray-600 mb-8">–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –°–µ–π—á–∞—Å –º—ã —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–º.</p>
                                <button onClick={handleNextStep} className="bg-gradient-to-r from-pink-500 to-purple-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                    –Ø –≥–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å!
                                </button>
                            </div>
                        )}
                        
                        {step === 2 && (
                            <div className="w-full text-center">
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">–ü–æ–≤—ã—Å—å —Å–≤–æ—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å!</h2>
                                <div className="mb-6">
                                    <div className="w-full bg-gray-200 rounded-full h-4 mb-2 overflow-hidden">
                                        <div className="bg-gradient-to-r from-pink-500 to-purple-600 h-4 rounded-full transition-all duration-500 ease-out" style={{width: `${confidence}%`}}></div>
                                    </div>
                                    <p className="text-lg font-bold text-gray-700">{getConfidenceFeedback().emoji} {getConfidenceFeedback().text}</p>
                                </div>
                                <p className="text-gray-600 mb-8">–ù–∞–∂–∏–º–∞–π, —á—Ç–æ–±—ã –∑–∞—Ä—è–¥–∏—Ç—å—Å—è!</p>
                                <button onClick={handleConfidenceBoost} disabled={confidence >= 100} className={`font-bold py-3 px-8 rounded-full text-lg shadow-lg transform transition-all duration-300 w-full ${confidence >= 100 ? 'bg-green-500 text-white animate-pulse' : 'bg-gradient-to-r from-pink-500 to-purple-600 text-white hover:scale-105 hover:shadow-xl'}`}>
                                    {confidence >= 100 ? '–ó–ê–†–Ø–ñ–ï–ù–û!' : '–ó–∞—Ä—è–¥–∏—Ç—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å!'}
                                </button>
                            </div>
                        )}

                        {step === 3 && <Checklist onComplete={() => setStep(4)} />}
                        
                        {step === 4 && (
                            <div className="w-full text-center">
                                <div className="w-16 h-16 bg-green-500 rounded-full mx-auto mb-6 flex items-center justify-center animate-bounce shadow-lg"><svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.01M15 10h1.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div>
                                <h2 className="text-2xl font-bold text-gray-800 mb-4">–¢—ã –≥–æ—Ç–æ–≤!</h2>
                                <div className="bg-gradient-to-r from-pink-100 to-purple-100 rounded-2xl p-4 mb-6 min-h-[80px] flex items-center justify-center">
                                    <p className="text-lg font-semibold text-gray-800">{typedMessage}</p>
                                </div>
                                <button onClick={() => setStep(5)} className="bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                    –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å!
                                </button>
                            </div>
                        )}
                        
                        {step === 5 && (
                            <div className="w-full text-center">
                                <div className="w-24 h-24 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full mx-auto mb-6 flex items-center justify-center animate-pulse shadow-lg"><svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg></div>
                                <h2 className="text-3xl font-bold text-gray-800 mb-2">–¢—ã —Å–¥–µ–ª–∞–ª —ç—Ç–æ!</h2>
                                <p className="text-xl font-bold text-green-600 mb-6">–õ–ï–û–ù - –ö–†–ê–°–ê–í–ß–ò–ö!</p>
                                <p className="text-gray-600 mb-6">–¢—ã —É–∂–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—å! –ù–∞–∂–º–∏, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —á–∞—Ç.</p>
                                <button onClick={() => openTelegram()} className="mb-4 w-full bg-blue-500 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:bg-blue-600 transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" viewBox="0 0 24 24" fill="currentColor"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.58c-.28 1.13-1.04 1.4-1.74.88L14.25 16l-2.64 2.54c-.3.29-.5.42-.87.42z"/></svg>
                                    –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram
                                </button>
                                <button onClick={() => setIsModalOpen(true)} className="mb-6 w-full bg-gray-200 text-gray-700 font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:bg-gray-300 transform hover:scale-105 transition-all duration-300">
                                    üí° –ù—É–∂–Ω—ã –∏–¥–µ–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è?
                                </button>
                                <button onClick={restart} className="text-gray-500 hover:text-gray-800 transition">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
                            </div>
                        )}
                    </div>
                    <div className="mt-8 text-center z-10">
                        <p className="text-white text-sm opacity-80">–ú—ã –≤ —Ç–µ–±—è –≤–µ—Ä–∏–º!</p>
                    </div>
                </div>
            );
        }
        
        // --- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ß–µ–∫-–ª–∏—Å—Ç–∞ ---
        function Checklist({ onComplete }) {
            const items = ["–í—Å–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ —Ç—ã –∫—Ä–∞—Å–∞–≤—á–∏–∫", "–°–¥–µ–ª–∞—Ç—å –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö", "–£–ª—ã–±–Ω—É—Ç—å—Å—è"];
            const [checkedItems, setCheckedItems] = React.useState([]);

            React.useEffect(() => {
                items.forEach((item, index) => {
                    setTimeout(() => {
                        setCheckedItems(prev => [...prev, item]);
                        playClickSound();
                    }, (index + 1) * 1000);
                });
                setTimeout(onComplete, (items.length + 1) * 1000);
            }, [onComplete]);

            return (
                <div className="w-full text-center">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6">–ü—Ä–µ–¥–ø–æ–ª–µ—Ç–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞:</h2>
                    <div className="space-y-4 text-left">
                        {items.map((item, index) => (
                            <div key={index} className={`transition-opacity duration-500 ${checkedItems.includes(item) ? 'opacity-100' : 'opacity-0'}`}>
                                <p className="text-lg text-gray-700">
                                    <span className="text-green-500 mr-2">‚úì</span>{item}
                                </p>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>

